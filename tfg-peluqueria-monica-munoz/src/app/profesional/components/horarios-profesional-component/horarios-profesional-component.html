<section class="mis-horarios-section">
  <div class="container mt-5 mb-5">

    <h2 class="mb-4 text-center title-main">Mis Horarios</h2>

    @if(cargando) {
      <div class="text-center py-5">
        <div class="spinner-border text-primary" role="status">
          <span class="visually-hidden">Cargando...</span>
        </div>
        <p class="mt-3 text-muted">Cargando horarios...</p>
      </div>
    }

    @if(!cargando && horariosDelProfesional.length === 0) {
      <div class="empty-state">
        <div class="empty-icon">ðŸ•’</div>
        <h3>No tienes horarios asignados</h3>
        <p>Los horarios asignados por el administrador aparecerÃ¡n aquÃ­</p>
      </div>
    }

    @if(!cargando && horariosDelProfesional.length > 0) {
      <div class="horarios-container">
        @for(horario of horariosDelProfesional; track horario.id_horario) {
          <div class="horario-wrapper">
            <div class="horario-card">
              <div class="horario-header">
                <div class="horario-icon">
                  <i class="bi bi-clock-fill"></i>
                </div>
                <h5 class="horario-title">Horario de Trabajo</h5>
              </div>
              
              <div class="horario-body">
                <div class="horario-detail">
                  <div class="detail-label">
                    <i class="bi bi-calendar-week"></i>
                    <span>DÃ­as laborables</span>
                  </div>
                  <div class="detail-value dias-list">
                    @for(dia of horario.dias; track dia) {
                      <span class="badge-dia">{{ dia }}</span>
                    }
                  </div>
                </div>

                <div class="horario-detail">
                  <div class="detail-label">
                    <i class="bi bi-clock"></i>
                    <span>Horario laboral</span>
                  </div>
                  <div class="detail-value">
                    <div class="horario-tiempo">
                      <div class="tiempo-item">
                        <span class="tiempo-label">Inicio</span>
                        <span class="time-badge">{{ horario.hora_inicio }}</span>
                      </div>
                      <div class="tiempo-separador">
                        <i class="bi bi-arrow-right"></i>
                      </div>
                      <div class="tiempo-item">
                        <span class="tiempo-label">Fin</span>
                        <span class="time-badge">{{ horario.hora_fin }}</span>
                      </div>
                    </div>
                  </div>
                </div>

                <div class="horario-detail">
                  <div class="detail-label">
                    <i class="bi bi-calendar-event"></i>
                    <span>Fechas festivas</span>
                  </div>
                  <div class="detail-value">
                    @if(tieneFechasFestivas(horario)) {
                      <span class="badge-festivos" [title]="formatearFechasFestivas(horario)">
                        <i class="bi bi-calendar-event me-1"></i>{{ horario.fechas_festivas!.length }} fecha(s)
                      </span>
                      <div class="fechas-list mt-2">
                        @for(fecha of horario.fechas_festivas; track fecha) {
                          <span class="fecha-badge">{{ formatearFecha(fecha) }}</span>
                        }
                      </div>
                    } @else {
                      <span class="badge-sin-festivos">Ninguna</span>
                    }
                  </div>
                </div>

                <div class="horario-footer">
                  <div class="duration-info">
                    <i class="bi bi-hourglass-split"></i>
                    <span>Jornada completa</span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        }
      </div>

      <div class="info-note mt-4">
        <i class="bi bi-info-circle"></i>
        <p class="mb-0">Los horarios son gestionados por el administrador y se actualizan automÃ¡ticamente cuando hay cambios.</p>
      </div>
    }
  </div>
</section>
