<section class="admin-section">
  <div class="container mt-5 mb-5">
    <h2 class="mb-4 text-center title-main">Gesti√≥n de Servicios</h2>

    <div class="mb-4">
      <button class="btn btn-success" (click)="crearServicio()">
        <i class="bi bi-plus-circle"></i> Crear Servicio
      </button>
    </div>

    <!-- Filtros y b√∫squeda -->
    <div class="filtros-container mb-4">
      <div class="filtro-grupo busqueda">
        <label for="busqueda"><i class="bi bi-search"></i> Buscar:</label>
        <input
          type="text"
          id="busqueda"
          [(ngModel)]="busquedaTexto"
          (input)="aplicarFiltros()"
          placeholder="Nombre o descripci√≥n..."
          class="form-control">
      </div>

      <div class="resultados-count">
        <span class="badge bg-info">{{ serviciosFiltrados.length }} de {{ servicios.length }} servicios</span>
      </div>
    </div>


    @if(cargando) {
      <div class="empty-state">
        <div class="spinner-border text-primary" role="status">
          <span class="visually-hidden">Cargando...</span>
        </div>
        <p class="mt-3">Cargando servicios...</p>
      </div>
    }

    @if(error) {
      <div class="alert alert-danger text-center">
        <i class="bi bi-exclamation-triangle"></i> Error al cargar los servicios
      </div>
    }

    @if(!cargando && serviciosFiltrados.length === 0 && servicios.length === 0) {
      <div class="empty-state">
        <div class="empty-icon">‚úÇÔ∏è</div>
        <h3>No hay servicios registrados</h3>
        <p>Crea tu primer servicio para comenzar</p>
      </div>
    }

    @if(!cargando && serviciosFiltrados.length === 0 && servicios.length > 0) {
      <div class="empty-state">
        <div class="empty-icon">üîç</div>
        <h3>No se encontraron servicios</h3>
        <p>No hay servicios que coincidan con la b√∫squeda</p>
      </div>
    }

    @if(serviciosFiltrados.length > 0) {
      <table class="table-custom">
        <thead>
          <tr>
            <th><i class="bi bi-tag"></i> Nombre</th>
            <th><i class="bi bi-file-text"></i> Descripci√≥n</th>
            <th><i class="bi bi-clock"></i> Duraci√≥n</th>
            <th><i class="bi bi-cash"></i> Precio</th>
            <th><i class="bi bi-geo-alt"></i> Centro</th>
            <th><i class="bi bi-people"></i> Profesionales</th>
            <th><i class="bi bi-gear"></i> Acciones</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let servicio of serviciosFiltrados">
            <td class="fw-bold">{{ servicio.nombre }}</td>
            <td>{{ servicio.descripcion }}</td>
            <td><span class="badge-hora">{{ servicio.duracion }} min</span></td>
            <td class="text-success fw-bold">{{ servicio.precio }}‚Ç¨</td>
            <td>{{ nombreCentro(servicio.id_centro) }}</td>
            <td>{{ profesionalesDelServicio(servicio.id_servicio) }}</td>
            <td>
              <button class="btn btn-sm btn-primary me-1" [routerLink]="['/admin/servicios/editar', servicio.id_servicio]">
                <i class="bi bi-pencil"></i>
              </button>
              <button class="btn btn-sm btn-danger" (click)="borrarServicio(servicio)">
                <i class="bi bi-trash3"></i>
              </button>
            </td>
          </tr>
        </tbody>
      </table>
    }
  </div>
</section>
